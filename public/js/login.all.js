var links={authenticateUrl:"index.php/authenticate/authenitcateUser",successRedirectUrl:"index.php/doctorDashboard/",registerDoctorUrl:"index.php/doctor/doctorInfo",adminUrl:"index.php/adminDashboard/admin",passwordRestRequestUrl:"index.php/authenticate/resetPasswordRequest",loginUrl:"index.php/authenticate/login",passwordResetUrl:"index.php/authenticate/passwordReset",forgotPasswordUrl:"index.php/authenticate/forgotPassword",doctorListingUrl:"index.php/adminDashboard/doctorListing",getAllDoctorsUrl:"index.php/adminDashboard/getAllDoctors",adminDoctorEditRedirect:"index.php/adminDashboard/adminDoctorEdit",logoutUrl:"index.php/authenticate/logout",doctorProfile:"index.php/doctorDashboard/doctorProfile",dashboardHomeUrl:"index.php/doctorDashboard/",newAppointmentUrl:"index.php/doctorDashboard/bookAppointment",patientsEntryUrl:"index.php/doctorDashboard/patientsEntry",patientsListingUrl:"index.php/doctorDashboard/patientsListing",closeAppointmentUrl:"index.php/doctorDashboard/closeAppointment",doctorsAppointmentsListUrl:"index.php/doctorDashboard/listAppointment",newScheduleUrl:"index.php/doctorDashboard/newSchedule",deactivateScheduleUrl:"index.php/doctorDashboard/deactivateSchedule",listScheduleUrl:"index.php/doctorDashboard/scheduleList",getScheduleCalendarUrl:"index.php/doctorDashboard/ScheduleCalenderView",addStaffUrl:"index.php/doctorDashboard/staffEntry",doctorsStaffListingUr:"index.php/doctorDashboard/staffListing",patientsHistoryUrl:"index.php/doctorDashboard/patientHistory",createProgramForPatientUrl:"index.php/doctorDashboard/createMedicalProgram",programmeListingsUrl:"index.php/doctorDashboard/programmeList",ManageLocationsUrl:"index.php/doctorDashboard/workLocationManagement",getAnalyticsUrl:"index.php/doctorDashboard/AnalyticsReport",getCalenderUrl:"index.php/doctorDashboard/calendarTemplate",accountingUrl:"index.php/doctorDashboard/accounting",medicineSearchUrl:"index.php/doctorDashboard/medicineSearch",getLocationUrl:"index.php/locations/getDoctorLocations",createUpdateScheduleUrl:"index.php/schedule/createUpdateSchedule",getSechduleCalendarDetailsUrl:"index.php/schedule/getCalanderDetails",getSechduleforDeactivation:"index.php/schedule/getSchedulesForDeactivation",deactivateScheduleDays:"index.php/schedule/deactivateScheduleDays",doctorsProgramsUrl:"index.php/programme/getDoctorsCheckupPrograms",programmeEditUrl:"index.php/doctorDashboard/createMedicalProgram",createModifyProgrammeUrl:"index.php/programme/createModifyProgramme",getProgrammeUrl:"index.php/programme/getProgrammes",patientDetailPersistUrl:"index.php/patient/addUpdatePatient",patientsDetailsUrl:"index.php/patient/getPatientDetails",loginCheckUrl:"index.php/authenticate/isLoggedIn",getProgrammeList:"index.php/programme/getMedicationProgrammeList",programmeListDetailsUrl:"index.php/programme/getProgrammeListDetails",patientListingUrl:"index.php/patient/getPatientList",getPatientsForAutoFillUrl:"index.php/patient/getPatientListForAutoFill",getPatientHistoryUrl:"index.php/patient/getPatientHistory",getpatientsImageUrl:"index.php/patient/getPatientImage",bookAppointmentUrl:"index.php/appointment/bookAppointment",getAppointmentForTheDayUrl:"index.php/appointment/getAppointmentsForTheDay",getAllAppointmentsUrl:"index.php/appointment/getAllAppointments",cancelAppointmentUrl:"index.php/appointment/cancelAppointment",closeAppointmentUrl:"index.php/appointment/closeAppointment",rescheduleAppointmentUrl:"index.php/appointment/rescheduleAppointment",saveUpdateLocations:"index.php/locations/addUpdateLocation",locationListUrl:"index.php/locations/getDoctorLocations",deactivateLocationUrl:"index.php/locations/deactivateLocation",deliveryMethodsUrl:"index.php/patient/getDeliveryMethods",doctorUrl:"index.php/doctor/saveUpdateDoctor",doctorDetailsUrl:"index.php/doctor/getDoctorDetails",loginCheckUrl:"index.php/authenticate/isLoggedIn",doctorDashUrl:"index.php/doctorDashboard/",logoutUrl:"index.php/authenticate/logout",createModifyStaffUrl:"index.php/staff/createModifyStaff",getStaffDetailsUrl:"index.php/staff/getStaffDetails",staffListingUrl:"index.php/staff/getDoctorsStaffList",closeApptUploadFiles:"index.php/Upload/CloseApptUpload",PatientUploadimage:"index.php/Upload/PatientImageUpload",GaurdianUploadimage:"index.php/Upload/GuardianImageUpload"},utility={getURLParam:function(e){var t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=o.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},getTimeFromMinutes:function(e){var t=e/60,e=e%60,o=moment({hours:t,minutes:e});return o.format("hh:mm A")},getAlerts:function(e,t,o,i){$(".pms-alerts").remove();var a=$('<div  id = "'+o+'" class=" alert '+t+' pms-alerts alert-dismissible doc-profile-before-submit-warning-error" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+e+"</div>");$(i).prepend(a),console.log("alert created")},removeAlerts:function(){$(".pms-alerts").remove()}};$(document).ready(function(){$(function(){console.log("login component");var e={init:function(){t.init(),t.hideAllAlerts();var e=utility.getURLParam("registered");e&&1==+e&&t.showRegisterSucccessAlert()},authenticateUrl:links.authenticateUrl,successRedirectUrl:links.successRedirectUrl,registerDoctorUrl:links.registerDoctorUrl,forgotPaswordUrl:links.forgotPasswordUrl,adminUrl:links.adminUrl,authenticate:function(o,i){t.loginBtn.attr("disabled","disbled"),console.log("call authenticate"),console.log(e.authenticateUrl),$.post(e.authenticateUrl,{loginId:o,password:i}).done(function(o){console.log("response "+JSON.stringify(o)),"-1"==o.data.type?(t.loginBtn.removeAttr("disabled"),console.log("invalid username or password"),t.alertCredentialsInvalid.removeClass("hidden")):0==+o.data.isActive?console.log("Account is inactive, please contact the administrator to activate the account"):"A"==o.data.type?(console.log("authenticated as admin"),window.location.href=e.adminUrl):"D"==o.data.type?(console.log("authenticated as doctor"),window.location.href=e.successRedirectUrl):"S"==o.data.type?(window.location.href=e.successRedirectUrl,console.log("staff authenticated")):t.loginBtn.removeAttr("disabled")})}},t={init:function(){console.log("view init"),this.loginId=$("#login-id"),this.password=$("#login-password"),this.alertLoginIdNeeded=$("#alert-user-id-needed"),this.alertPassNeeded=$("#alert-password-needed"),this.alertCredentialsInvalid=$("#alert-creds-invalid"),this.alertRegisterSuccess=$("#doc-registered-success");var o={loginId:this.loginId,password:this.password};$(document).keypress(function(i){var a=i.keyCode?i.keyCode:i.which;if("13"==a){console.log("click submit"+o.loginId.val()),console.log("url: "+e.authenticateUrl),t.hideAllAlerts();var r=t.loginId.val(),n=t.password.val();if(!r||!r.trim())return console.log("pass"),void t.alertLoginIdNeeded.removeClass("hidden");if(!n||!n.trim())return console.log("confirm pass"),void t.alertPassNeeded.removeClass("hidden");e.authenticate(r,n)}}),this.loginBtn=$("#login-submit"),this.loginBtn.on("click",function(){console.log("click submit"+o.loginId.val()),console.log("url: "+e.authenticateUrl),t.hideAllAlerts();var i=t.loginId.val(),a=t.password.val();return i&&i.trim()?a&&a.trim()?void e.authenticate(i,a):(console.log("confirm pass"),void t.alertPassNeeded.removeClass("hidden")):(console.log("pass"),void t.alertLoginIdNeeded.removeClass("hidden"))}),$("#btn-register-doctor").attr("href",e.registerDoctorUrl),$("#btn-forgot-password").attr("href",e.forgotPaswordUrl)},hideAllAlerts:function(){this.alertLoginIdNeeded.addClass("hidden"),this.alertPassNeeded.addClass("hidden"),this.alertCredentialsInvalid.addClass("hidden"),this.alertRegisterSuccess.addClass("hidden")},showRegisterSucccessAlert:function(){this.alertRegisterSuccess.removeClass("hidden")}};e.init()}())});